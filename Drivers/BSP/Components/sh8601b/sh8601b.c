/**
  ******************************************************************************
  * @file    sh8601b.c
  * @author  SHT FAE Team
  * @brief   This file provides the LCD Driver for DSI OLED Display IC(SH8601B).   
  ******************************************************************************
  * @attention
  *
  * <h2><center>&copy; COPYRIGHT(c) 2017 STMicroelectronics</center></h2>
  *
  * Redistribution and use in source and binary forms, with or without modification,
  * are permitted provided that the following conditions are met:
  *   1. Redistributions of source code must retain the above copyright notice,
  *      this list of conditions and the following disclaimer.
  *   2. Redistributions in binary form must reproduce the above copyright notice,
  *      this list of conditions and the following disclaimer in the documentation
  *      and/or other materials provided with the distribution.
  *   3. Neither the name of STMicroelectronics nor the names of its contributors
  *      may be used to endorse or promote products derived from this software
  *      without specific prior written permission.
  *
  * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
  * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
  * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
  * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE
  * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
  * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
  * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
  * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
  * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  *
  ******************************************************************************
  */

/* Includes ------------------------------------------------------------------*/
#include "sh8601b.h"

/** @addtogroup BSP
  * @{
  */
  
/** @addtogroup Components
  * @{
  */ 

/** @defgroup SH8601B SH8601B
  * @brief     This file provides a set of functions needed to drive the 
  *            sh8601b IC display driver.
  * @{
  */

#define DSI_MAX_PAYLOAD_SIZE            (110)

/* Private types -------------------------------------------------------------*/
typedef struct __DSI_REG_DATA_STRUCT {
    uint8_t     m_type;
    uint32_t    m_delayms;
    uint8_t     m_cmd;
    uint32_t    m_size;
    uint8_t     m_payload[DSI_MAX_PAYLOAD_SIZE];
} DSI_REG_DATA_STRUCT;

/* Private variables ---------------------------------------------------------*/
/* Private constants ---------------------------------------------------------*/
/** @defgroup SH8601B_Private_Constants SH8601B Private Constants
  * @{
  */

/*
 * @brief Constant tables of register settings used to transmit DSI
 * command packets as power up initialization sequence of the EDO 1.4" Module (SH8601B LCD Driver)
 */
#if defined ( __ICCARM__ )
#pragma location="ExtQSPIFlashSection" 
#else
__attribute__((section(".ExtQSPIFlashSection")))  
#endif
static const DSI_REG_DATA_STRUCT EDO_E01_REG_DATA[] = 
{
{SHT_DSI_DCS_LONG_PKT_WRITE,        1,      0xC0,                       2,      {0x5A,0x5A}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        1,      0xC1,                       2,      {0x5A,0x5A}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        1,      0xE6,                       8,      {0x02,0x04,0x01,0x72,0x00,0x00,0x00,0x00}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        1,      0xE7,                       2,      {0x01,0x00}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        1,      0xC1,                       2,      {0xA5,0xA5}},
{SHT_DSI_DCS_SHORT_PKT_WRITE_P0,    110,    SH8601B_CMD_SLPOUT,         0,      {0x00}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        1,      SH8601B_CMD_CASET,          4,      {0x00,0x00,0x01,0x8F}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        1,      SH8601B_CMD_PASET,          4,      {0x00,0x00,0x01,0x8F}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        1,      SH8601B_CMD_TESCAN,         2,      {0x00,0xFA}},
{SHT_DSI_DCS_SHORT_PKT_WRITE_P1,    1,      SH8601B_CMD_TEON,           1,      {0x00}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        1,      SH8601B_CMD_WRDISBV,        2,      {0x00,0xFF}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        1,      SH8601B_CMD_AOD_WRDISBV,    2,      {0x00,0xFF}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        1,      SH8601B_CMD_HBM_WRDISBV,    2,      {0x00,0xFF}},
{SHT_DSI_DCS_SHORT_PKT_WRITE_P1,    1,      SH8601B_CMD_WRCTRLD1,       1,      {0x28}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        1,      0xF0,                       14,     {0x92,0x14,0x11,0xA6,0x91,0x1A,0x08,0x0F,0x80,0x80,0x55,0x55,0x01,0x00}},
{SHT_DSI_DCS_SHORT_PKT_WRITE_P0,    1,      0x29,                       0,      {0x00}},
};

#if defined ( __ICCARM__ )
#pragma location="ExtQSPIFlashSection" 
#else
__attribute__((section(".ExtQSPIFlashSection")))  
#endif
static const DSI_REG_DATA_STRUCT EDO_E02_REG_DATA[] = 
{
#if !defined(__TARGET_EDO_1_4_1_PANEL_PREREG__)
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      0xC0,                       2,      {0x5A,0x5A}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      0xC1,                       2,      {0x5A,0x5A}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      0xE6,                       8,      {0x02,0x04,0x01,0x72,0x00,0x00,0x00,0x00}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      0xE7,                       2,      {0x01,0x00}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      0xC1,                       2,      {0xA5,0xA5}},
{SHT_DSI_DCS_SHORT_PKT_WRITE_P0,    110,    SH8601B_CMD_SLPOUT,         1,      {0x00}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      SH8601B_CMD_CASET,          4,      {0x00,0x00,0x01,0x3F}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      SH8601B_CMD_PASET,          4,      {0x00,0x00,0x01,0x67}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      SH8601B_CMD_TESCAN,         2,      {0x00,0xFA}},
//{SHT_DSI_DCS_SHORT_PKT_WRITE_P1,    0,      SH8601B_CMD_TEON,           1,      {0x00}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      SH8601B_CMD_WRDISBV,        2,      {0x00,0xFF}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      SH8601B_CMD_AOD_WRDISBV,    2,      {0x00,0xFF}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      SH8601B_CMD_HBM_WRDISBV,    2,      {0x00,0xFF}},
{SHT_DSI_DCS_SHORT_PKT_WRITE_P1,    0,      SH8601B_CMD_WRCTRLD1,       1,      {0x28}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      0xF0,                       14,     {0x92,0x14,0x11,0xA6,0x91,0x1A,0x08,0x0F,0x80,0x80,0x55,0x55,0x01,0x00}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      0xC0,                       2,      {0xA5,0xA5}},
#else
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      0xC0,                       2,      {0x5A,0x5A}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      0xC1,                       2,      {0x5A,0x5A}},
{SHT_DSI_DCS_SHORT_PKT_WRITE_P1,    0,      0x90,                       1,      {0x03}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      0x9B,                       24,     {0x17,0x00,0x00,0x00,0x00,0x00,0x00,0x67,0x01,0x00,     0x00,0x09,0x00,0x00,0x00,0x67,0x01,0x01,0x8A,0x00,     0xF5,0x00,0xB0,0x00}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      0x9C,                       24,     {0x15,0x3F,0x01,0x3F,0x01,0x00,0x00,0x67,0x01,0x36,0x01,0x3F,0x01,0x00,0x00,0x67,0x01,0x01,0xD0,0x00,0x90,0x00,0xA0,0x00}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      0x9D,                       24,     {0x13,0x00,0x00,0x3F,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x3F,0x01,0x00,0x00,0x09,0x00,0x01,0xFF,0x00,0xFF,0x00,0xFF,0x00}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      0x9E,                       24,     {0x11,0x00,0x00,0x3F,0x01,0x67,0x01,0x67,0x01,0x00,0x00,0x3F,0x01,0x5E,0x01,0x67,0x01,0x01,0xFF,0x00,0xFF,0x00,0xFF,0x00}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      0x9F,                       104,    {0x01,0x02,0x03,0x04,0x05,0x06,0x07,0x08,0x09,0x0A,0x0B,0x0C,0x0D,0x0E,0x0F,0x10,0x03,0x06,0x09,0x0C,0x0F,0x12,0x15,0x18,0x1B,0x1E,0x21,0x24,0x27,0x2A,0x2D,0x30,0x09,0x0D,0x12,0x16,0x1B,0x24,0x2D,0x36,0x3F,0x5A,0x63,0x6C,0x75,0x7E,0x87,0x90,0x05,0x0A,0x0F,0x14,0x19,0x1E,0x23,0x28,0x2D,0x32,0x37,0x3C,0x41,0x46,0x4B,0x50,0x0F,0x1E,0x2D,0x3C,0x4B,0x5A,0x69,0x78,0x87,0x96,0xA5,0xB4,0xC3,0xD2,0xE1,0xF5,0x0F,0x1E,0x2D,0x3C,0x4B,0x5A,0x69,0x78,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x80,0x60,0x40,0x20,0x00,0x00,0x00,0x00}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      0xB1,                       24,     {0x08,0x68,0x01,0x14,0x10,0x00,0x08,0x00,0x26,0x01,0x54,0x01,0x10,0x00,0x08,0x00,0x26,0x01,0x54,0x01,0x40,0x90,0x03,0x01}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      0xB2,                       16,     {0x16,0x16,0x06,0x04,0x00,0x00,0x0E,0x0B,0x31,0xD5,0xF1,0x11,0x00,0x00,0x00,0x22}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      0xB3,                       48,     {0x0D,0x0F,0x0E,0x00,0x1F,0x1F,0x1F,0x1F,0x1F,0x00,0x00,0x00,0x02,0x06,0x04,0x00,0x1F,0x1F,0x1F,0x00,0x00,0x00,0x00,0x00,0x1F,0x1F,0x00,0x12,0x15,0x13,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x05,0x03,0x00,0x00,0x1F,0x1F,0x00,0x00}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      0xB4,                       47,     {0x00,0x00,0x16,0x16,0x16,0x16,0x16,0x16,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x19,0x19,0x19,0x19,0x19,0x19,0x00,0x00,0x00,0x00,0x00,0x00,0x31,0x05,0x42,0x76,0x98,0xBA,0x31,0x05,0x42,0x06,0x98,0xBA,0x50,0x0A,0x00,0x50,0x0A,0x92,0x00,0x00}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      0xB5,                       52,     {0x40,0x00,0x00,0x01,0xF4,0x01,0xC2,0x01,0xC2,0x01,0xFF,0x03,0xC2,0x01,0xFF,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x03,0x02,0x6E,0x00,0x07,0x00,0x0F,0x00,0x8E,0x03,0x0F,0x00,0x8E,0x03,0x0F,0x00,0x8E,0x03,0x0F,0x00,0x8E,0x03,0x00,0x92}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      0xB6,                       27,     {0x00,0x00,0x16,0x16,0x16,0x16,0x16,0x16,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x19,0x19,0x19,0x19,0x19,0x19,0x00,0x00,0x00,0x00,0x00,0x00}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      0xB7,                       52,     {0x40,0x00,0x00,0x01,0xF4,0x01,0xC2,0x01,0xC2,0x01,0xFF,0x03,0xC2,0x01,0xFF,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x03,0x02,0x6E,0x00,0x07,0x00,0x0F,0x00,0xBD,0x03,0x0F,0x00,0xBD,0x03,0x0F,0x00,0xBD,0x03,0x0F,0x00,0xBD,0x03,0x00,0x00}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      0xB8,                       92,     {0x00,0x40,0x40,0x40,0x40,0x40,0x40,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x40,0x40,0x40,0x40,0x40,0x40,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x80,0x80,0x80,0x80,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x80,0x80,0x80,0x80,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      0xBD,                       20,     {0x11,0x00,0x01,0xF4,0x01,0x00,0x83,0x02,0x00,0x15,0x00,0x30,0x34,0x15,0x35,0x36,0x1F,0x01,0x00,0x00}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      0xBE,                       51,     {0x00,0x00,0x00,0x00,0x57,0xAB,0xFF,0xFF,0xFF,0x00,0x00,0x00,0x00,0x00,0x57,0x00,0x08,0x1D,0x3A,0x57,0x57,0x57,0x57,0x00,0x00,0x00,0x91,0x08,0x03,0x70,0xEC,0x7B,0x7B,0x7B,0x7B,0x7B,0x7B,0x00,0x01,0x11,0x11,0x01,0x7F,0xFF,0x00,0x03,0x39,0x80,0x80,0x00,0x00}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      0xC2,                       36,     {0x83,0x03,0x93,0x03,0x71,0x04,0xD5,0xD8,0xD4,0xD2,0xD3,0xD0,0xBC,0xBD,0xB7,0xC8,0xC8,0xC6,0xDB,0xDB,0xDA,0xD9,0xDA,0xDA,0xCF,0xD2,0xD5,0xAD,0xC1,0xD2,0x00,0x00,0xD2,0x00,0x00,0x00}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      0xC3,                       36,     {0x83,0x03,0x93,0x03,0x71,0x04,0xD5,0xD8,0xD4,0xD2,0xD3,0xD0,0xBC,0xBD,0xB7,0xC8,0xC8,0xC6,0xDB,0xDB,0xDA,0xD9,0xDA,0xDA,0xCF,0xD2,0xD5,0xAD,0xC1,0xD2,0x00,0x00,0xD2,0x00,0x00,0x00}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      0xC4,                       36,     {0x4E,0x02,0x62,0x02,0xDC,0x02,0xE3,0xE4,0xE1,0xDE,0xDD,0xDC,0xCA,0xCB,0xC8,0xCF,0xCF,0xD1,0xDB,0xDE,0xE0,0xD7,0xDB,0xE3,0xA3,0xD1,0xE3,0x00,0x33,0xDB,0x00,0x22,0x88,0x00,0x00,0x00}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      0xC5,                       36,     {0x4E,0x02,0x62,0x02,0xDC,0x02,0xE3,0xE4,0xE1,0xDE,0xDD,0xDC,0xCA,0xCB,0xC8,0xCF,0xCF,0xD1,0xDB,0xDE,0xE0,0xD7,0xDB,0xE3,0xA3,0xD1,0xE3,0x00,0x33,0xDB,0x00,0x22,0x88,0x00,0x00,0x00}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      0xC6,                       36,     {0x4E,0x02,0x62,0x02,0xDC,0x02,0xE3,0xE4,0xE1,0xDE,0xDD,0xDC,0xCA,0xCB,0xC8,0xCF,0xCF,0xD1,0xDB,0xDE,0xE0,0xD7,0xDB,0xE3,0xA3,0xD1,0xE3,0x00,0x33,0xDB,0x00,0x22,0x88,0x00,0x00,0x00}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      0xC7,                       36,     {0x4E,0x02,0x62,0x02,0xDC,0x02,0xE3,0xE4,0xE1,0xDE,0xDD,0xDC,0xCA,0xCB,0xC8,0xCF,0xCF,0xD1,0xDB,0xDE,0xE0,0xD7,0xDB,0xE3,0xA3,0xD1,0xE3,0x00,0x33,0xDB,0x00,0x22,0x88,0x00,0x00,0x00}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      0xC8,                       36,     {0x4E,0x02,0x62,0x02,0xDC,0x02,0xE3,0xE4,0xE1,0xDE,0xDD,0xDC,0xCA,0xCB,0xC8,0xCF,0xCF,0xD1,0xDB,0xDE,0xE0,0xD7,0xDB,0xE3,0xA3,0xD1,0xE3,0x00,0x33,0xDB,0x00,0x22,0x88,0x00,0x00,0x00}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      0xC9,                       36,     {0xA6,0x02,0xBA,0x02,0x51,0x03,0xE0,0xE1,0xDE,0xDA,0xDA,0xD8,0xC5,0xC5,0xC2,0xCD,0xCE,0xCE,0xDB,0xDC,0xDE,0xD6,0xDA,0xDF,0xBE,0xCF,0xDD,0x00,0x00,0xDD,0x00,0x00,0x12,0x00,0x00,0x00}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      0xCA,                       36,     {0xE9,0x02,0xFC,0x02,0xA9,0x03,0xDD,0xDE,0xDB,0xD7,0xD8,0xD5,0xC3,0xC3,0xBF,0xCC,0xCD,0xCC,0xDB,0xDB,0xDC,0xD7,0xDA,0xDD,0xC9,0xD1,0xDB,0x05,0xA5,0xDB,0x15,0x1A,0x17,0x00,0x00,0x00}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      0xCB,                       36,     {0xA6,0x02,0xBA,0x02,0x51,0x03,0xE0,0xE1,0xDE,0xDA,0xDA,0xD8,0xC5,0xC5,0xC2,0xCD,0xCE,0xCE,0xDB,0xDC,0xDE,0xD6,0xDA,0xDF,0xBE,0xCF,0xDD,0x00,0x00,0xDD,0x00,0x00,0x12,0x00,0x00,0x00}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      0xCC,                       36,     {0xA6,0x02,0xBA,0x02,0x51,0x03,0xE0,0xE1,0xDE,0xDA,0xDA,0xD8,0xC5,0xC5,0xC2,0xCD,0xCE,0xCE,0xDB,0xDC,0xDE,0xD6,0xDA,0xDF,0xBE,0xCF,0xDD,0x00,0x00,0xDD,0x00,0x00,0x12,0x00,0x00,0x00}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      0xCD,                       36,     {0xA6,0x02,0xBA,0x02,0x51,0x03,0xE0,0xE1,0xDE,0xDA,0xDA,0xD8,0xC5,0xC5,0xC2,0xCD,0xCE,0xCE,0xDB,0xDC,0xDE,0xD6,0xDA,0xDF,0xBE,0xCF,0xDD,0x00,0x00,0xDD,0x00,0x00,0x12,0x00,0x00,0x00}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      0xD3,                       17,     {0x01,0x40,0x01,0x68,0x01,0x08,0x08,0x14,0x14,0x06,0x00,0x00,0x00,0x00,0x00,0x00,0x00}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      0xD4,                       50,     {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x10,0x00,0x27,0x00,0xFD,0x01,0x00,0x00,0x00,0x00,0x42,0x00,0xA2,0x00,0xF5,0x01,0x00,0x00,0x00,0x00,0xFC,0x01,0xF6,0x01,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      0xD5,                       50,     {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFC,0x01,0xF6,0x01,0x01,0x00,0x00,0x00,0x00,0x00,0x42,0x00,0xA2,0x00,0xF5,0x01,0x00,0x00,0x00,0x00,0x10,0x00,0x27,0x00,0xFD,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      0xD6,                       50,     {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFD,0x01,0x27,0x00,0x10,0x00,0x00,0x00,0x00,0x00,0xF5,0x01,0xA2,0x00,0x42,0x00,0x00,0x00,0x00,0x00,0x01,0x00,0xF6,0x01,0xFC,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      0xD7,                       50,     {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x00,0xF6,0x01,0xFC,0x01,0x00,0x00,0x00,0x00,0xF5,0x01,0xA2,0x00,0x42,0x00,0x00,0x00,0x00,0x00,0xFD,0x01,0x27,0x00,0x10,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      0xD8,                       50,     {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xF3,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xC1,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x4C,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      0xD9,                       50,     {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x4C,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xC1,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xF2,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      0xE6,                       8,      {0x02,0x04,0x01,0x72,0x00,0x00,0x00,0x00}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      0xE7,                       2,      {0x01,0x00}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      0xF0,                       14,     {0x92,0x14,0x11,0x26,0x11,0x1A,0x08,0x0F,0x80,0x80,0x55,0x55,0x01,0x00}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      0xF1,                       13,     {0x90,0x04,0x00,0x27,0x11,0x1C,0x08,0x0F,0x10,0x0F,0x55,0x55,0x01}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      0xF2,                       28,     {0x12,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x21,0x0A,0x12,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x21,0x01}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      0xF7,                       8,      {0x10,0x55,0x05,0x00,0x00,0x10,0x00,0x00}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      0xFF,                       6,      {0x00,0x00,0x00,0x00,0x00,0x04}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      0xC1,                       2,      {0xA5,0xA5}},
{SHT_DSI_DCS_SHORT_PKT_WRITE_P0,    110,    SH8601B_CMD_SLPOUT,         1,      {0x00}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      SH8601B_CMD_CASET,          4,      {0x00,0x00,0x01,0x3F}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      SH8601B_CMD_PASET,          4,      {0x00,0x00,0x01,0x67}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      SH8601B_CMD_TESCAN,         2,      {0x01,0x00}},
//{SHT_DSI_DCS_SHORT_PKT_WRITE_P1,    0,      SH8601B_CMD_TEON,           1,      {0x00}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      SH8601B_CMD_WRDISBV,        2,      {0x00,0xFF}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      SH8601B_CMD_AOD_WRDISBV,    2,      {0x00,0xFF}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      SH8601B_CMD_HBM_WRDISBV,    2,      {0x00,0xFF}},
{SHT_DSI_DCS_SHORT_PKT_WRITE_P1,    0,      SH8601B_CMD_WRCTRLD1,       1,      {0x28}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      0xF0,                       14,     {0x92,0x14,0x11,0xA6,0x91,0x1A,0x08,0x0F,0x80,0x80,0x55,0x55,0x01,0x00}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      0xC0,                       2,      {0xA5,0xA5}},
#endif
};

#if defined ( __ICCARM__ )
#pragma location="ExtQSPIFlashSection" 
#else
__attribute__((section(".ExtQSPIFlashSection")))  
#endif
static const DSI_REG_DATA_STRUCT INFINITRUE_E02_REG_DATA[] = 
{
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      0xC0,                       2,      {0x5A,0x5A}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      0xC1,                       2,      {0x5A,0x5A}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      0xE6,                       8,      {0x02,0x04,0x01,0x72,0x00,0x00,0x00,0x00}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      0xE7,                       2,      {0x01,0x00}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      0xC1,                       2,      {0xA5,0xA5}},
{SHT_DSI_DCS_SHORT_PKT_WRITE_P0,    110,    SH8601B_CMD_SLPOUT,         1,      {0x00}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      SH8601B_CMD_CASET,          4,      {0x00,0x00,0x01,0x3F}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      SH8601B_CMD_PASET,          4,      {0x00,0x00,0x01,0x67}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      SH8601B_CMD_TESCAN,         2,      {0x00,0xFA}},
//{SHT_DSI_DCS_SHORT_PKT_WRITE_P1,    0,      SH8601B_CMD_TEON,           1,      {0x00}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      SH8601B_CMD_WRDISBV,        2,      {0x00,0xFF}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      SH8601B_CMD_AOD_WRDISBV,    2,      {0x00,0xFF}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      SH8601B_CMD_HBM_WRDISBV,    2,      {0x00,0xFF}},
{SHT_DSI_DCS_SHORT_PKT_WRITE_P1,    0,      SH8601B_CMD_WRCTRLD1,       1,      {0x28}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      0xF0,                       14,     {0x92,0x14,0x11,0xA6,0x91,0x1A,0x08,0x0F,0x80,0x80,0x55,0x55,0x01,0x00}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      0xC0,                       2,      {0xA5,0xA5}},
};

#if defined ( __ICCARM__ )
#pragma location="ExtQSPIFlashSection" 
#else
__attribute__((section(".ExtQSPIFlashSection")))  
#endif
static const DSI_REG_DATA_STRUCT TRULY_R01_HOLE_REG_DATA[] = 
{
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      0xC0,                       2,      {0x5A,0x5A}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      0xC1,                       2,      {0x5A,0x5A}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      0xE6,                       8,      {0x02,0x04,0x01,0x72,0x00,0x00,0x00,0x00}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      0xE7,                       2,      {0x01,0x00}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      0xC1,                       2,      {0xA5,0xA5}},
{SHT_DSI_DCS_SHORT_PKT_WRITE_P0,    110,    SH8601B_CMD_SLPOUT,         1,      {0x00}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      SH8601B_CMD_CASET,          4,      {0x00,0x06,0x01,0x8B}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      SH8601B_CMD_PASET,          4,      {0x00,0x00,0x01,0x85}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      SH8601B_CMD_TESCAN,         2,      {0x00,0xFA}},
//{SHT_DSI_DCS_SHORT_PKT_WRITE_P1,    0,      SH8601B_CMD_TEON,           1,      {0x00}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      SH8601B_CMD_WRDISBV,        2,      {0x00,0xFF}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      SH8601B_CMD_AOD_WRDISBV,    2,      {0x00,0xFF}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      SH8601B_CMD_HBM_WRDISBV,    2,      {0x00,0xFF}},
{SHT_DSI_DCS_SHORT_PKT_WRITE_P1,    0,      SH8601B_CMD_WRCTRLD1,       1,      {0x28}},
{SHT_DSI_DCS_SHORT_PKT_WRITE_P1,    0,      SH8601B_CMD_WRCTRLD2,       1,      {0x20}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      0xF0,                       14,     {0x02,0x19,0x31,0xB0,0x9A,0x1C,0x85,0x85,0x80,0x80,0x55,0x55,0x01,0x00}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      0xC0,                       2,      {0xA5,0xA5}},
};

#if defined ( __ICCARM__ )
#pragma location="ExtQSPIFlashSection" 
#else
__attribute__((section(".ExtQSPIFlashSection")))  
#endif
static const DSI_REG_DATA_STRUCT TRULY_R01_NO_HOLE_REG_DATA[] = 
{
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      0xC0,                       2,      {0x5A,0x5A}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      0xC1,                       2,      {0x5A,0x5A}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      0xE6,                       8,      {0x02,0x04,0x01,0x72,0x00,0x00,0x00,0x00}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      0xE7,                       2,      {0x01,0x00}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      0xC1,                       2,      {0xA5,0xA5}},
{SHT_DSI_DCS_SHORT_PKT_WRITE_P0,    110,    SH8601B_CMD_SLPOUT,         1,      {0x00}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      SH8601B_CMD_CASET,          4,      {0x00,0x06,0x01,0x8B}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      SH8601B_CMD_PASET,          4,      {0x00,0x00,0x01,0x85}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      SH8601B_CMD_TESCAN,         2,      {0x00,0xFA}},
//{SHT_DSI_DCS_SHORT_PKT_WRITE_P1,    0,      SH8601B_CMD_TEON,           1,      {0x00}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      SH8601B_CMD_WRDISBV,        2,      {0x00,0xFF}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      SH8601B_CMD_AOD_WRDISBV,    2,      {0x00,0xFF}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      SH8601B_CMD_HBM_WRDISBV,    2,      {0x00,0xFF}},
{SHT_DSI_DCS_SHORT_PKT_WRITE_P1,    0,      SH8601B_CMD_WRCTRLD1,       1,      {0x28}},
{SHT_DSI_DCS_SHORT_PKT_WRITE_P1,    0,      SH8601B_CMD_WRCTRLD2,       1,      {0x20}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      0xF0,                       14,     {0x02,0x19,0x31,0xB0,0x9A,0x1C,0x85,0x85,0x80,0x80,0x55,0x55,0x01,0x00}},
{SHT_DSI_DCS_LONG_PKT_WRITE,        0,      0xC0,                       2,      {0xA5,0xA5}},
};

/**
  * @}
  */

/* Private macros ------------------------------------------------------------*/
/* Private functions ---------------------------------------------------------*/
/** @defgroup SH8601B_Exported_Variables
  * @{
  */

/**
  * @}
  */

/* Exported functions ---------------------------------------------------------*/
/** @defgroup SH8601B_Exported_Functions OTM8009A Exported Functions
  * @{
  */

/**
  * @brief  DSI IO write short/long command.
  * @note : Can be surcharged by application code implementation of the function.
  */
__weak void DSI_IO_WriteCmd(uint8_t type, uint8_t cmd, uint32_t size, uint8_t* payload)
{
  /* NOTE : This function Should not be modified, when it is needed,
            the DSI_IO_WriteCmd could be implemented in the user file
   */
}

/**
  * @brief  Initializes the LCD Driver for DSI OLED Display IC(SH8601B)
  * @param  none
  * @retval status
  */
void SH8601B_Init(uint8_t panel)
{
    uint32_t i = 0, length = 0;
  
    const uint8_t len = 1;
    uint8_t buffer[2];
  
    switch (panel) {
    case PANEL_EDO_E01:
        length = sizeof(EDO_E01_REG_DATA) / sizeof(DSI_REG_DATA_STRUCT);
        for (i = 0; i < length; i++) {
            DSI_IO_WriteCmd(EDO_E01_REG_DATA[i].m_type, EDO_E01_REG_DATA[i].m_cmd, EDO_E01_REG_DATA[i].m_size, (uint8_t *)EDO_E01_REG_DATA[i].m_payload);
            if (EDO_E01_REG_DATA[i].m_delayms > 0) {
                SH8601B_IO_Delay(EDO_E01_REG_DATA[i].m_delayms);
            }
            
        }
//        DSI_IO_Read(0x0A, buffer, len);
        SH8601B_IO_Delay(10);
        DSI_IO_Read1Param(0x0A, buffer, 1);
        break;
    case PANEL_EDO_E02:
        length = sizeof(EDO_E02_REG_DATA) / sizeof(DSI_REG_DATA_STRUCT);
        for (i = 0; i < length; i++) {
            DSI_IO_WriteCmd(EDO_E02_REG_DATA[i].m_type, EDO_E02_REG_DATA[i].m_cmd, EDO_E02_REG_DATA[i].m_size, (uint8_t *)EDO_E02_REG_DATA[i].m_payload);
            if (EDO_E02_REG_DATA[i].m_delayms > 0) {
                SH8601B_IO_Delay(EDO_E02_REG_DATA[i].m_delayms);
            }
            
        }
        break;
    case PANEL_INFINITRUE_E02:
        length = sizeof(INFINITRUE_E02_REG_DATA) / sizeof(DSI_REG_DATA_STRUCT);
        for (i = 0; i < length; i++) {
            DSI_IO_WriteCmd(INFINITRUE_E02_REG_DATA[i].m_type, INFINITRUE_E02_REG_DATA[i].m_cmd, INFINITRUE_E02_REG_DATA[i].m_size, (uint8_t *)INFINITRUE_E02_REG_DATA[i].m_payload);
            if (INFINITRUE_E02_REG_DATA[i].m_delayms > 0) {
                SH8601B_IO_Delay(INFINITRUE_E02_REG_DATA[i].m_delayms);
            }
            
        }
        break;
    case PANEL_TRULY_R01_HOLE:
        length = sizeof(TRULY_R01_HOLE_REG_DATA) / sizeof(DSI_REG_DATA_STRUCT);
        for (i = 0; i < length; i++) {
            DSI_IO_WriteCmd(TRULY_R01_HOLE_REG_DATA[i].m_type, TRULY_R01_HOLE_REG_DATA[i].m_cmd, TRULY_R01_HOLE_REG_DATA[i].m_size, (uint8_t *)TRULY_R01_HOLE_REG_DATA[i].m_payload);
            if (TRULY_R01_HOLE_REG_DATA[i].m_delayms > 0) {
                SH8601B_IO_Delay(TRULY_R01_HOLE_REG_DATA[i].m_delayms);
            }
            
        }
        break;
    case PANEL_TRULY_R01_NO_HOLE:
        length = sizeof(TRULY_R01_NO_HOLE_REG_DATA) / sizeof(DSI_REG_DATA_STRUCT);
        for (i = 0; i < length; i++) {
            DSI_IO_WriteCmd(TRULY_R01_NO_HOLE_REG_DATA[i].m_type, TRULY_R01_NO_HOLE_REG_DATA[i].m_cmd, TRULY_R01_NO_HOLE_REG_DATA[i].m_size, (uint8_t *)TRULY_R01_NO_HOLE_REG_DATA[i].m_payload);
            if (TRULY_R01_NO_HOLE_REG_DATA[i].m_delayms > 0) {
                SH8601B_IO_Delay(TRULY_R01_NO_HOLE_REG_DATA[i].m_delayms);
            }
            
        }
        break;
    default:
        length = sizeof(EDO_E01_REG_DATA) / sizeof(DSI_REG_DATA_STRUCT);
        for (i = 0; i < length; i++) {
            DSI_IO_WriteCmd(EDO_E01_REG_DATA[i].m_type, EDO_E01_REG_DATA[i].m_cmd, EDO_E01_REG_DATA[i].m_size, (uint8_t *)EDO_E01_REG_DATA[i].m_payload);
            if (EDO_E01_REG_DATA[i].m_delayms > 0) {
                SH8601B_IO_Delay(EDO_E01_REG_DATA[i].m_delayms);
            }
            
        }
        break;
    }

    return;
}

/**
  * @}
  */

/**
  * @}
  */

/**
  * @}
  */

/**
  * @}
  */

/************************ (C) COPYRIGHT STMicroelectronics *****END OF FILE****/
